<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Cart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container py-4">
      <div id="parentContainer" class="row g-4 justify-content-center"></div>
    </div>

    <div class="container">
      <h4>Cart Items:</h4>
      <ul id="cartItems" class="list-group"></ul>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <script>
      const parentContainer = document.getElementById("parentContainer");
      const cartList = document.getElementById("cartItems");

      const products = [
        { id: 1, Name: "Laptop", Price: 1000 },
        { id: 2, Name: "Mobile", Price: 500 },
        { id: 3, Name: "Mouse", Price: 300 },
        { id: 4, Name: "Headphone", Price: 250 },
        { id: 5, Name: "Handfree", Price: 100 },
      ];

      let cart = [];

      products.forEach((item) => {
        const colDiv = document.createElement("div");
        colDiv.classList.add("col-md-4", "col-lg-3", "d-flex");

        const cardDiv = document.createElement("div");
        cardDiv.classList.add(
          "card",
          "shadow-lg",
          "border-0",
          "flex-fill",
          "text-center",
          "p-3"
        );

        const heading = document.createElement("h3");
        heading.classList.add("card-title");
        heading.textContent = item.Name;

        const price = document.createElement("p");
        price.classList.add("card-text", "text-muted");
        price.textContent = `${item.Price}`;

        const btn = document.createElement("button");
        btn.classList.add("btn", "btn-primary", "w-100");
        btn.textContent = "Add to Cart";

        btn.addEventListener("click", () => {
          addToCart(item.id);
          displayCart();
        });

        cardDiv.appendChild(heading);
        cardDiv.appendChild(price);
        cardDiv.appendChild(btn);
        colDiv.appendChild(cardDiv);
        parentContainer.appendChild(colDiv);
      });

      const addToCart = (id) => {
        const selected = products.find((p) => p.id === id);
        const existing = cart.find((item) => item.id === id);

        if (existing) {
          existing.quantity += 1;
        } else {
          cart.push({ ...selected, quantity: 1 });
        }
      };

      const removeItem = (id) => {
        cart = cart.filter((item) => item.id !== id);
        displayCart();
      };

      const increaseQuantity = (id) => {
        const item = cart.find((i) => i.id === id);
        if (item) {
          item.quantity += 1;
          displayCart();
        }
      };

      const decreaseQuantity = (id) => {
        const item = cart.find((i) => i.id === id);
        if (item) {
          if (item.quantity > 1) {
            item.quantity -= 1;
          } else {
            cart = cart.filter((i) => i.id !== id);
          }
          displayCart();
        }
      };

      const displayCart = () => {
        cartList.innerHTML = "";
        cart.forEach((item) => {
          const li = document.createElement("li");
          li.classList.add(
            "list-group-item",
            "d-flex",
            "justify-content-between",
            "align-items-center"
          );

          const textDiv = document.createElement("div");
          textDiv.textContent = `${item.Name} (x${item.quantity}) - ${
            item.Price * item.quantity
          }`;

          const btnGroup = document.createElement("div");
          btnGroup.classList.add("d-flex", "align-items-center");

          const decreaseBtn = document.createElement("button");
          decreaseBtn.classList.add("btn", "btn-warning", "btn-sm");
          decreaseBtn.textContent = "Decrease (-)";
          decreaseBtn.addEventListener("click", () =>
            decreaseQuantity(item.id)
          );

          const increaseBtn = document.createElement("button");
          increaseBtn.classList.add("btn", "btn-success", "btn-sm", "ms-2");
          increaseBtn.textContent = "Increase (+)";
          increaseBtn.addEventListener("click", () =>
            increaseQuantity(item.id)
          );

          const removeBTN = document.createElement("button");
          removeBTN.classList.add("btn", "btn-danger", "btn-sm", "ms-2");
          removeBTN.textContent = "Delete";
          removeBTN.addEventListener("click", () => removeItem(item.id));

          btnGroup.appendChild(decreaseBtn);
          btnGroup.appendChild(increaseBtn);
          btnGroup.appendChild(removeBTN);

          li.appendChild(textDiv);
          li.appendChild(btnGroup);
          cartList.appendChild(li);
        });
      };
    </script>
  </body>
</html>
